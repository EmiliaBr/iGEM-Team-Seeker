"use strict";angular.module("iGemPlates2014App",["ui.utils"]),angular.module("iGemPlates2014App").controller("TeamCtrl",["$scope","$http",function(a,b){function c(a){a=a.toLowerCase(),a=a.replace(/[\.,!?]/g,"");var b=/ .{1,3} /g;a=a.replace(b," ");for(var c=a.split(" "),d=["that","but","we","the","which","a","as","an","in","while","with","then","also","just","this","use","is","into","for","both","our","will","able","team","project","if"],e=0;e<d.length;e++)for(var f=d[e];-1!==c.indexOf(f);)c.splice(c.indexOf(f),1);return c}b.get("teams.json").success(function(b){a.entries=b}),a.criteria={},a.criteria.Abstract="",a.onlyOverZero=function(a){return null==a.Score?!0:a.Score>0},a.phraseSearch=function(){var b=new Date,d=b.getTime();if(null==a.entries)return a.entries;for(var e=0;e<a.entries.length;e++)a.entries[e].SearchText=c(a.entries[e].Abstract),a.entries[e].SearchText.push.apply(a.entries[e].SearchText,c(a.entries[e].Description));var f=c(a.criteria.Abstract);console.log(f);var g=[];b=new Date,console.log("before queryWords count: "),console.log(b.getTime()-d);for(var h=[],e=0;e<f.length;e++){for(var i=f[e],h=[],j=0;j<a.entries.length;j++){for(var k=0,l=a.entries[j].SearchText,m=0;m<l.length;m++)i==l[m]&&k++;h.push(k)}g.push([i,h])}b=new Date,console.log("after queryWords count and before scores calculation: "),console.log(b.getTime()-d);var n=new Array(a.entries.length);console.log("ASDAFSGASFDGSAFDGFSD");for(var e=0;e<g.length;e++){var o=0;console.log(g[e][1].length);for(var j=0;j<g[e][1].length;j++)g[e][1]>0&&o++;for(var j=0;j<g[e][1].length;j++)n[j]||(n[j]=0),n[j]+=Math.log(g[e][1][j]+1)*Math.log(a.entries.length/(1+o))}b=new Date,console.log("after scores calculation: "),console.log(b.getTime()-d);for(var e=0;e<a.entries.length;e++)a.entries[e].Score=n[e];return console.log("after scores adding: "),console.log(b.getTime()-d),a.entries},a.getScore=function(a){return-1*a.Score}}]),angular.module("iGemPlates2014App").filter("unsafe",["$sce",function(a){return function(b){return a.trustAsHtml(b)}}]);